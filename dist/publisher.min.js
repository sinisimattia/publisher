var Publisher=function(t,e,n,r){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=i(r);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _=function(t){f(n,t);var e=h(n);function n(){return a(this,n),e.apply(this,arguments)}return u(n,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,r){var i=n.selection,o=i.$cursor?i.$cursor.pos:i.$to.pos,a=e.create(t);r(n.tr.insert(o,a))}}}},{key:"name",get:function(){return"iframe"}},{key:"schema",get:function(){return{attrs:{src:{default:null}},group:"block",selectable:!1,parseDOM:[{tag:"iframe",getAttrs:function(t){return{src:t.getAttribute("src")}}}],toDOM:function(t){return["iframe",{src:t.attrs.src,frameborder:0,allowfullscreen:"true",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}]}}}}]),n}(e.Node);function w(t,e,n,r,i,o,a,s,u,c){"boolean"!=typeof a&&(u=s,s=a,a=!1);const l="function"==typeof n?n.options:n;let d;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),r&&(l._scopeId=r),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=d):e&&(d=a?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),d)if(l.functional){const t=l.render;l.render=function(e,n){return d.call(n),t(e,n)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,d):[d]}return n}var g=w({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{key:t.show,staticClass:"modal"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"input",domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),n("button",{staticClass:"button",attrs:{pattern:t.pattern},on:{click:t.insert}},[t._t("default",[t._v("Create element")])],2)]):t._e()},staticRenderFns:[]},void 0,{data:function(){return{url:"",command:null,show:!1}},methods:{showModal:function(t){this.command=t,this.show=!0},insert:function(){if(this.url&&this.pattern.test(this.url)){var t={command:this.command,data:{src:this.url}};this.$emit("onConfirm",t),this.url="",this.show=!1}}},props:{pattern:{type:RegExp,default:function(){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),k={components:{EditorMenuBar:e.EditorMenuBar,EditorContent:e.EditorContent,EditorMenuBubble:e.EditorMenuBubble,URLModal:g},props:{value:Object},data:function(){var t=this;return{editor:new e.Editor({extensions:[new n.Bold,new n.Italic,new n.Blockquote,new n.Heading({levels:[2,3,4]}),new n.Link,new n.Image,new _],onUpdate:function(e){var n=e.getJSON;t.$emit("input",n())}}),linkUrl:null,linkMenuIsActive:!1}},beforeDestroy:function(){this.editor.destroy()},methods:{showLinkMenu:function(t){var e=this;this.linkUrl=t.href,this.linkMenuIsActive=!0,this.$nextTick((function(){e.$refs.linkInput.focus()}))},hideLinkMenu:function(){this.linkUrl=null,this.linkMenuIsActive=!1},setLinkUrl:function(t,e){t({href:e}),this.hideLinkMenu()},imagePrompt:function(t){var e=prompt("Enter the url of your image here");null!==e&&t({src:e})},showVideoModal:function(t){this.$refs.urlModal.showModal(t)},addCommand:function(t){null!==t.command&&t.command(t.data)}},watch:{value:{immediate:!0,deep:!0,handler:function(t){var e=this.editor.state.selection,n=e.from,r=e.to;this.editor.setContent(t),this.editor.setSelection(n,r)}}}};const O="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function C(t){return(t,e)=>function(t,e){const n=O?e.media||"default":t,r=E[n]||(E[n]={ids:new Set,styles:[]});if(!r.ids.has(t)){r.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",e.media&&r.element.setAttribute("media",e.media),void 0===j&&(j=document.head||document.getElementsByTagName("head")[0]),j.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const t=r.ids.size-1,e=document.createTextNode(n),i=r.element.childNodes;i[t]&&r.element.removeChild(i[t]),i.length?r.element.insertBefore(e,i[t]):r.element.appendChild(e)}}}(t,e)}let j;const E={};var I=w({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[n("editor-menu-bubble",{staticClass:"menububble",attrs:{editor:t.editor},on:{hide:t.hideLinkMenu},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.commands,i=e.isActive,o=e.getMarkAttrs,a=e.menu;return[n("div",{staticClass:"menububble",class:{"is-active":a.isActive},style:"left: "+a.left+"px; bottom: "+a.bottom+"px;"},[t.linkMenuIsActive?n("form",{on:{submit:function(e){return e.preventDefault(),t.setLinkUrl(r.link,t.linkUrl)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.linkUrl,expression:"linkUrl"}],ref:"linkInput",staticClass:"input",attrs:{type:"search",placeholder:"https://"},domProps:{value:t.linkUrl},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideLinkMenu(e)},input:function(e){e.target.composing||(t.linkUrl=e.target.value)}}})]):[n("button",{staticClass:"button",class:{"is-active":i.link()},on:{click:function(e){t.showLinkMenu(o("link"))}}},[n("span",[t._t("link",[t._v("Add link")])],2)])]],2)]}}])}),t._v(" "),n("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.commands,i=e.isActive;return[n("div",{staticClass:"commands"},[n("span",{staticClass:"titles"},[n("button",{class:{"is-active":i.heading({level:2})},attrs:{type:"button"},on:{click:function(t){return r.heading({level:2})}}},[t._t("title",[n("span",[t._v("Title")])])],2),t._v(" "),n("button",{class:{"is-active":i.heading({level:3})},attrs:{type:"button"},on:{click:function(t){return r.heading({level:3})}}},[t._t("subtitle",[n("span",[t._v("Subtitle")])])],2),t._v(" "),n("button",{class:{"is-active":i.heading({level:4})},attrs:{type:"button"},on:{click:function(t){return r.heading({level:4})}}},[t._t("sectionTitle",[n("span",[t._v("Section Title")])])],2)]),t._v(" "),n("button",{class:{"is-active":i.bold()},attrs:{type:"button"},on:{click:r.bold}},[t._t("bold",[n("b",[t._v("B")])])],2),t._v(" "),n("button",{class:{"is-active":i.italic()},attrs:{type:"button"},on:{click:r.italic}},[t._t("italic",[n("i",[t._v("I")])])],2),t._v(" "),n("button",{class:{"is-active":i.blockquote()},attrs:{type:"button"},on:{click:r.blockquote}},[t._t("blockquote",[n("span",[t._v("Q")])])],2),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(e){return t.imagePrompt(r.image)}}},[t._t("image",[n("span",[t._v("IMG")])])],2),t._v(" "),n("span",[n("button",{attrs:{type:"button"},on:{click:function(e){return t.showVideoModal(r.iframe)}}},[t._t("embed",[n("span",[t._v("</>")])])],2),t._v(" "),n("URLModal",{ref:"urlModal",on:{onConfirm:t.addCommand}},[t._t("createEmbed")],2)],1)])]}}],null,!0)}),t._v(" "),n("editor-content",{staticClass:"content",attrs:{editor:t.editor}})],1)},staticRenderFns:[]},(function(t){t&&t("data-v-0cbd4c67_0",{source:".editor[data-v-0cbd4c67]{position:relative}.menububble[data-v-0cbd4c67]{position:absolute;z-index:20;transform:translateX(-50%);visibility:hidden;opacity:0}.menububble.is-active[data-v-0cbd4c67]{opacity:1;visibility:visible}",map:void 0,media:void 0})}),k,"data-v-0cbd4c67",!1,void 0,!1,C,void 0,void 0),M=function(t){f(n,t);var e=h(n);function n(){return a(this,n),e.apply(this,arguments)}return u(n,[{key:"matching",value:function(){return"iframe"===this.node.type}},{key:"tag",value:function(){return{tag:"iframe",attrs:{src:this.node.attrs.src,frameborder:this.node.attrs.frameborder,allowfullscreen:this.node.attrs.allowfullscreen,allow:this.node.attrs.allow}}}}]),n}(o.default.Node),R=w({render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"content",domProps:{innerHTML:this._s(this.result)}})},staticRenderFns:[]},void 0,{props:{value:Object},data:function(){return{renderer:new r.Renderer,result:String}},mounted:function(){this.renderer.addNode(M)},watch:{value:{immediate:!0,handler:function(t){this.result=this.renderer.render(t)}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),S=w({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{staticClass:"editor"},t._l(t.value,(function(e,r){return n("li",{key:r,staticClass:"content"},[t._t("item",t._l(Object.keys(e),(function(r){return n("span",{key:r,staticClass:"item"},[t._v(t._s(e[r]))])})),{item:e}),t._v(" "),n("span",{staticClass:"commands"},[t._t("commands",[n("button",{attrs:{type:"button"},on:{click:function(e){return t.remove(r)}}},[t._t("remove",[t._v("Remove")])],2)])],2)],2)})),0),t._v(" "),n("form",{ref:"form",staticClass:"commands",on:{submit:function(e){return e.preventDefault(),t.insert(e)}}},[t._t("new",[t.select?n("span",t._l(Object.keys(t.newItem),(function(e){return n("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem[e],expression:"newItem[key]"}],key:e,staticClass:"input",attrs:{placeholder:e},on:{change:function(n){var r=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,e,n.target.multiple?r:r[0])}}},[n("option",{attrs:{disabled:"",selected:""}},[t._t("defaultSelection",[t._v("\n\t\t\t\t\t\t\tSelect "+t._s(e)+"\n\t\t\t\t\t\t")],{selected:e})],2),t._v(" "),t._l(t.choices[e],(function(r,i){return n("option",{key:e+"-choice-"+i,domProps:{value:r.value}},[t._t("option",[t._v(t._s(r.name))],{option:r})],2)}))],2)})),0):n("span",t._l(Object.keys(t.newItem),(function(e){return n("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem[e],expression:"newItem[key]"}],key:e,staticClass:"input",attrs:{type:"text",placeholder:e},domProps:{value:t.newItem[e]},on:{input:function(n){n.target.composing||t.$set(t.newItem,e,n.target.value)}}})})),0)]),t._v(" "),t._t("submit",[n("button",{attrs:{type:"submit"}},[t._v("Add")])])],2)])},staticRenderFns:[]},void 0,{props:{value:Array,default:{type:Object,default:function(){return{type:"",content:""}}},select:{type:Boolean,default:!1},choices:{type:Object,default:function(){return{type:[{name:"Type",value:"type"}],content:[{name:"Content",value:"content"}]}}}},watch:{value:{immediate:!0,handler:function(t){this.$emit("input",t)}}},data:function(){return{newItem:{}}},methods:{insert:function(t){var e=d({},this.newItem);this.value.push(e),this.afterInsert(e,this.value)},remove:function(t){var e=this.value;e.splice(t,1),this.$emit("input",e)},afterInsert:function(t,e){this.newItem=d({},this.default)},afterRemove:function(t,e){}},mounted:function(){this.newItem=d({},this.default)}},void 0,!1,void 0,!1,void 0,void 0,void 0),A=Object.freeze({__proto__:null,Publisher:I,Reader:R,ListEditor:S}),P=function(t){P.installed||(P.installed=!0,Object.entries(A).forEach((function(e){var n=b(e,2),r=n[0],i=n[1];t.component(r,i)})))},$={install:P},x=null;return"undefined"!=typeof window?x=window.Vue:"undefined"!=typeof global&&(x=global.Vue),x&&x.use($),t.ListEditor=S,t.Publisher=I,t.Reader=R,t.default=$,t}({},tiptap,tiptapExtensions,prosemirrorToHtmlJs);